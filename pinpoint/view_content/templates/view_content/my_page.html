{% extends "base.html" %}
{% block title %}My Page{% endblock %}
{% block content %}
<h2>My Page</h2>
<br>
{% if posts %}
	<h4>My Posts</h4>
	<table class="table table-hover">
	<tr><th>Posts</th><th>Author</th></tr>
 		{% for post in posts %}
	<tr class="pointer" onclick="document.location='/edit/{{ post.id }}'">
		 <td>{{ post.title }}</td><td> ({{post.author}})</td>
	</tr>
 		{% endfor %}
	</table>
{% endif %}

<!-- TEMPORARY -->
<h4>Subscriptions</h4>
{% for author in subscriptions %}
	<div>{{ author }}</div>
{% endfor %}
{% for cat in subscriptions_cat %}
	<div>{{ cat }}</div>
{% endfor %}
{% if posts %}
	<table class="table table-hover">
	<tr><th>Posts</th><th>Author</th></tr>
 		{% for post in subscribed_content %}
			<tr class="pointer" onclick="document.location='/{{ post.id }}'">
				 <td>{{ post.title }}</td><td> ({{post.author}})</td>
			</tr>
 		{% endfor %}
	</table>
{% endif %}
<!-- /TEMPORARY -->

{% if needs_proofreading and is_editor %}
<br>
<h4>Needs Proofreading</h4>
<table class="table table-hover">
<tr>
	<th>Posts</th><th>Author</th><th><center>Editor</center></th>
</tr>
	{% for post in needs_proofreading %}
		<tr>
			 <td onclick="document.location='/edit/{{ post.id }}'">
				 {{ post.title }}
			 </td>
			<td onclick="document.location='/edit/{{ post.id }}'">({{post.author}})</td>
			<td>
				{% if post.editor is None %}
				<center><button class="btn btn-outline-secondary btn-sm" onclick="document.location='/assign/{{ post.id }}'">Assign to self</button></center>
				{% else %}
				<center>{{ post.editor }}</center>
				{% endif %}
			</td>
		</tr>
	{% endfor %}
</table>
{% endif %}
{% endblock %}

